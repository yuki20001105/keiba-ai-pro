# 🏇 競馬AI Pro - ユーザー認証フロー

## 📋 アプリケーションの動作

### 1️⃣ 初回アクセス時
1. **http://localhost:3000** にアクセス
2. 自動的に **ログイン画面** (`/auth/login`) にリダイレクト
3. ユーザーは認証が必要

### 2️⃣ 新規ユーザー登録
1. ログイン画面で「アカウントを作成」をクリック
2. **新規登録画面** (`/auth/signup`) に移動
3. 以下の情報を入力：
   - お名前
   - メールアドレス
   - パスワード（8文字以上）
4. 「登録する」ボタンをクリック
5. 登録成功後、自動的に **ホーム画面** (`/`) にリダイレクト

### 3️⃣ ログイン済みユーザー
1. **ホーム画面** に6つの機能カードが表示：
   - 📊 データ取得
   - 🧠 モデル学習
   - 🎯 予測実行
   - 💰 購入推奨
   - 📈 履歴・統計
2. ヘッダーに **ユーザーのメールアドレス** と **ログアウトボタン** を表示
3. 各機能カードをクリックして、対応するページへ移動

### 4️⃣ ログアウト
1. ヘッダーの「ログアウト」ボタンをクリック
2. 自動的に **ログイン画面** にリダイレクト
3. 再度ログインが必要

## 🎨 デザイン仕様

### カラースキーム
- **背景**: ダークブルーグラデーション
  - `from-slate-900 via-blue-900 to-slate-900`
- **カード**: 半透明のガラスモルフィズム
  - `bg-slate-800/50 backdrop-blur-sm`
- **ボーダー**: 青色の光彩効果
  - `border-blue-500/30 hover:border-blue-400`
- **テキスト**: 白とシアンのグラデーション
  - `from-blue-400 to-cyan-400`

## 🔒 認証システム

### Supabase認証
- **認証プロバイダー**: Supabase Auth
- **認証方法**: メール/パスワード
- **セッション管理**: 自動（Cookie + localStorage）
- **保護されたルート**: 
  - `/` - メインホーム（認証必須）
  - `/data-collection` - データ取得
  - `/train` - モデル学習
  - `/predict-batch` - 予測・購入推奨
  - `/dashboard` - 履歴・統計

### 公開ルート
- `/auth/login` - ログイン画面
- `/auth/signup` - 新規登録画面

## 🚀 起動方法

### FastAPI (バックエンド)
```powershell
# 別ウィンドウで起動済み
cd python-api
$env:PYTHONPATH="C:\Users\yuki2\Documents\ws\keiba-ai-pro"
uvicorn main:app --host 0.0.0.0 --port 8000
```
**URL**: http://localhost:8000

### Next.js (フロントエンド)
```powershell
# 現在起動中
npm run dev
```
**URL**: http://localhost:3000

## 📝 テストユーザー作成手順

1. ブラウザで http://localhost:3000 にアクセス
2. 自動的にログイン画面にリダイレクトされる
3. 「アカウントを作成」をクリック
4. 以下の情報で登録：
   ```
   お名前: テストユーザー
   メール: test@example.com
   パスワード: test1234
   ```
5. 登録後、ホーム画面が表示される
6. ヘッダーに `test@example.com` と表示される

## ✅ 動作確認項目

- [ ] 未認証時に自動的にログイン画面にリダイレクトされる
- [ ] 新規登録が正常に完了する
- [ ] 登録後、ホーム画面が表示される
- [ ] ヘッダーにメールアドレスが表示される
- [ ] 6つの機能カードが正常に表示される
- [ ] ログアウトボタンが機能する
- [ ] ログアウト後、ログイン画面にリダイレクトされる
- [ ] 再ログインが正常に動作する

## 🎯 今後の拡張

- ユーザープロフィール編集機能
- パスワードリセット機能
- ソーシャルログイン（Google, GitHub）
- ユーザーごとのデータ隔離（RLS）
- 利用履歴の記録
