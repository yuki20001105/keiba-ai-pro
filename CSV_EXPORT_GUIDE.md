# CSVã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæ©Ÿèƒ½ - ä½¿ã„æ–¹ã‚¬ã‚¤ãƒ‰

## ç”Ÿæˆã•ã‚ŒãŸCSVãƒ•ã‚¡ã‚¤ãƒ«

âœ… **å–å¾—å®Œäº†**: `race_data_202006010101_20260111_151631.csv`

### ğŸ“Š ãƒ‡ãƒ¼ã‚¿æ¦‚è¦

- **ç·è¡Œæ•°**: 16é ­ï¼ˆ1ãƒ¬ãƒ¼ã‚¹åˆ†ï¼‰
- **ç·åˆ—æ•°**: 60åˆ—
- **ãƒ‡ãƒ¼ã‚¿å……è¶³ç‡**: 
  - çˆ¶é¦¬: 100%
  - æ¯é¦¬: 100%
  - éå»æˆç¸¾: 100%

---

## ğŸ“ ç‰¹å¾´é‡ã‚«ãƒ†ã‚´ãƒªãƒ¼ï¼ˆå…¨60åˆ—ï¼‰

### 1. ãƒ¬ãƒ¼ã‚¹åŸºæœ¬æƒ…å ±ï¼ˆ14åˆ—ï¼‰
- `race_id` - ãƒ¬ãƒ¼ã‚¹IDï¼ˆ12æ¡ï¼‰
- `race_name` - ãƒ¬ãƒ¼ã‚¹å
- `post_time` - ç™ºèµ°æ™‚åˆ»
- `track_type` - èŠ/ãƒ€ãƒ¼ãƒˆ
- `distance` - è·é›¢ï¼ˆãƒ¡ãƒ¼ãƒˆãƒ«ï¼‰
- `course_direction` - å·¦/å³
- `weather` - å¤©å€™
- `field_condition` - é¦¬å ´çŠ¶æ…‹
- `kai` - é–‹å‚¬å›
- `venue` - ç«¶é¦¬å ´å
- `day` - é–‹å‚¬æ—¥ç›®
- `race_class` - ãƒ¬ãƒ¼ã‚¹ã‚¯ãƒ©ã‚¹
- `horse_count` - å‡ºèµ°é ­æ•°
- `prize_money` - è³é‡‘

### 2. çµæœãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆ15åˆ—ï¼‰
- `finish_position` - ç€é † â­
- `bracket_number` - æ ç•ª
- `horse_number` - é¦¬ç•ª
- `horse_name` - é¦¬å
- `sex_age` - æ€§é½¢
- `jockey_weight` - æ–¤é‡
- `jockey_name` - é¨æ‰‹å
- `finish_time` - ã‚¿ã‚¤ãƒ  â­
- `margin` - ç€å·®
- `popularity` - äººæ°—
- `odds` - å˜å‹ã‚ªãƒƒã‚º
- `last_3f` - å¾Œ3Fï¼ˆä¸ŠãŒã‚Šï¼‰
- `corner_positions` - ã‚³ãƒ¼ãƒŠãƒ¼é€šéé †
- `trainer_name` - èª¿æ•™å¸«å
- `weight` - é¦¬ä½“é‡

### 3. é¦¬è©³ç´°ï¼ˆ10åˆ—ï¼‰
- `horse_birth_date` - ç”Ÿå¹´æœˆæ—¥
- `horse_owner` - é¦¬ä¸»
- `horse_breeder` - ç”Ÿç”£è€…
- `horse_breeding_farm` - ç”£åœ°
- `sire` - çˆ¶é¦¬ ğŸ§¬
- `dam` - æ¯é¦¬ ğŸ§¬
- `damsire` - æ¯çˆ¶é¦¬ ğŸ§¬
- `past_performance_1` - éå»æˆç¸¾1
- `past_performance_2` - éå»æˆç¸¾2
- `past_performance_3` - éå»æˆç¸¾3

### 4. é¨æ‰‹è©³ç´°ï¼ˆ4åˆ—ï¼‰
- `jockey_win_rate` - å‹ç‡
- `jockey_place_rate_top2` - é€£å¯¾ç‡
- `jockey_show_rate` - è¤‡å‹ç‡
- `jockey_graded_wins` - é‡è³å‹åˆ©æ•°

### 5. èª¿æ•™å¸«è©³ç´°ï¼ˆ3åˆ—ï¼‰
- `trainer_win_rate` - å‹ç‡
- `trainer_place_rate_top2` - é€£å¯¾ç‡
- `trainer_show_rate` - è¤‡å‹ç‡

### 6. ãƒ©ãƒƒãƒ—ã‚¿ã‚¤ãƒ ï¼ˆ10åˆ—ï¼‰
- `lap_200m` ~ `lap_2000m` - å„åœ°ç‚¹ã®ãƒ©ãƒƒãƒ—ã‚¿ã‚¤ãƒ 

### 7. ã‚³ãƒ¼ãƒŠãƒ¼é€šéé †ä½ï¼ˆ4åˆ—ï¼‰
- `corner_1` ~ `corner_4` - å„ã‚³ãƒ¼ãƒŠãƒ¼é€šéé †ä½

---

## ğŸ’» ä½¿ç”¨æ–¹æ³•

### Excel ã§é–‹ã
```
1. CSVãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯
2. UTF-8ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã§è‡ªå‹•çš„ã«é–‹ãã¾ã™
```

### Python (Pandas) ã§åˆ†æ
```python
import pandas as pd

# CSVã‚’èª­ã¿è¾¼ã¿
df = pd.read_csv('race_data_202006010101_20260111_151631.csv')

# åŸºæœ¬çµ±è¨ˆ
print(df.describe())

# çˆ¶é¦¬ã”ã¨ã®å‹ç‡
sire_stats = df.groupby('sire')['finish_position'].apply(lambda x: (x == '1').sum())
print(sire_stats)

# è·é›¢åˆ¥ã®å¹³å‡ã‚¿ã‚¤ãƒ 
print(df.groupby('distance')['finish_time'].mean())

# é¨æ‰‹å‹ç‡ã¨ç€é †ã®ç›¸é–¢
print(df[['jockey_win_rate', 'finish_position']].corr())
```

### æ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«ã®è¨“ç·´
```python
import pandas as pd
from sklearn.model_selection import train_test_split
from sklearn.ensemble import RandomForestClassifier

# ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿
df = pd.read_csv('race_data_202006010101_20260111_151631.csv')

# ç‰¹å¾´é‡é¸æŠï¼ˆä¾‹ï¼‰
features = [
    'distance', 'jockey_weight', 'popularity', 'odds',
    'jockey_win_rate', 'jockey_place_rate_top2',
    'trainer_win_rate'
]

# æ¬ æå€¤ã‚’å‡¦ç†
X = df[features].fillna(0)

# ç›®çš„å¤‰æ•°ï¼ˆ3ç€ä»¥å†…ã«å…¥ã‚‹ã‹ï¼‰
y = df['finish_position'].astype(int) <= 3

# è¨“ç·´
X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.2)
model = RandomForestClassifier()
model.fit(X_train, y_train)

# ç²¾åº¦ç¢ºèª
print(f"Accuracy: {model.score(X_test, y_test):.2%}")

# é‡è¦ãªç‰¹å¾´é‡
feature_importance = pd.DataFrame({
    'feature': features,
    'importance': model.feature_importances_
}).sort_values('importance', ascending=False)
print(feature_importance)
```

---

## ğŸ“ˆ è¤‡æ•°ãƒ¬ãƒ¼ã‚¹ä¸€æ‹¬å–å¾—

æ—¥ä»˜ã‚’æŒ‡å®šã—ã¦è¤‡æ•°ãƒ¬ãƒ¼ã‚¹ã‚’ä¸€æ‹¬å–å¾—ï¼š

```python
# export_bulk_to_csv.py ã‚’å®Ÿè¡Œ
python export_bulk_to_csv.py

# ä¾‹: 2020å¹´1æœˆ5æ—¥ã®å…¨ãƒ¬ãƒ¼ã‚¹
# â†’ race_data_bulk_20200105_XXXXXX.csv ãŒç”Ÿæˆã•ã‚Œã‚‹
```

---

## ğŸ”„ å®šæœŸçš„ãªãƒ‡ãƒ¼ã‚¿åé›†

### ãƒãƒƒãƒã‚¹ã‚¯ãƒªãƒ—ãƒˆä¾‹
```python
import subprocess
from datetime import datetime, timedelta

# éå»1é€±é–“ã®ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
start_date = datetime(2020, 1, 1)
for i in range(7):
    date = start_date + timedelta(days=i)
    date_str = date.strftime('%Y%m%d')
    
    # ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°å®Ÿè¡Œ
    print(f"Collecting data for {date_str}...")
    # ... ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°å‡¦ç†
```

---

## âš ï¸ æ³¨æ„äº‹é …

1. **VPNæ¥ç¶š**: ProtonVPNã«æ¥ç¶šã—ã¦ã‹ã‚‰å®Ÿè¡Œã—ã¦ãã ã•ã„
2. **ãƒ¬ãƒ¼ãƒˆåˆ¶é™**: 3-7ç§’é–“éš”ã§ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã—ã¾ã™
3. **å®Ÿè¡Œæ™‚é–“**: 
   - 1ãƒ¬ãƒ¼ã‚¹ï¼ˆè©³ç´°ã‚ã‚Šï¼‰: ç´„4åˆ†
   - 1ãƒ¬ãƒ¼ã‚¹ï¼ˆè©³ç´°ãªã—ï¼‰: ç´„10ç§’
4. **ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°**: UTF-8 with BOMï¼ˆExcelã§æ–‡å­—åŒ–ã‘ã—ãªã„ï¼‰

---

## ğŸ“ ç”Ÿæˆã•ã‚Œã‚‹ãƒ•ã‚¡ã‚¤ãƒ«

### å˜ä¸€ãƒ¬ãƒ¼ã‚¹
- `race_data_{race_id}_{timestamp}.csv`
- ä¾‹: `race_data_202006010101_20260111_151631.csv`

### è¤‡æ•°ãƒ¬ãƒ¼ã‚¹
- `race_data_bulk_{kaisai_date}_{timestamp}.csv`
- ä¾‹: `race_data_bulk_20200105_20260111_160000.csv`

---

## ğŸ¯ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

1. âœ… CSVã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆå®Œæˆ
2. â³ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒã®æ›´æ–°
3. â³ å¤§é‡ãƒ‡ãƒ¼ã‚¿ã®åé›†ï¼ˆ2020-2024å¹´ï¼‰
4. â³ æ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«ã®æ§‹ç¯‰
5. â³ äºˆæ¸¬ã‚·ã‚¹ãƒ†ãƒ ã®å®Ÿè£…

ç¾åœ¨ã¯ **60å€‹ã®ç‰¹å¾´é‡** ã‚’å–å¾—å¯èƒ½ï¼
è©³ç´°ãƒšãƒ¼ã‚¸ã‚’å«ã‚ã‚‹ã¨ **70å€‹ä»¥ä¸Š** ã«æ‹¡å¼µå¯èƒ½ï¼
